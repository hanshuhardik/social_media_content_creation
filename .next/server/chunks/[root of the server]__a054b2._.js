module.exports = {

"[externals]/next/dist/compiled/next-server/app-route.runtime.dev.js [external] (next/dist/compiled/next-server/app-route.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-route.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page.runtime.dev.js [external] (next/dist/compiled/next-server/app-page.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/compiled/next-server/app-page.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, m: module, e: exports, t: __turbopack_require_real__ } = __turbopack_context__;
{
const mod = __turbopack_external_require__("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[project]/src/app/api/generate-post/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, x: __turbopack_external_require__, y: __turbopack_external_import__, z: __turbopack_require_stub__ } = __turbopack_context__;
{
//testing
// import { GoogleGenerativeAI } from "@google/generative-ai";
// const genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY as string);
// export const config = {
//   api: {
//     bodyParser: {
//       sizeLimit: '15mb', // allow image uploads
//     },
//   },
// };
// export async function POST(req: Request) {
//   try {
//     const body = await req.json();
//     const {
//       platform,
//       tone,
//       wordLimit,
//       includeHashtags,
//       includeEmoji,
//       description,
//       imageBase64,
//     } = body;
//     const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash" });
//     let prompt = "";
//     // --- Platform-Specific Prompts ---
//     if (platform === "blog") {
//       prompt = `
//       Write a detailed blog post on: "${description || 'a topic inferred from the image'}".
//       Requirements:
//       - Tone: ${tone}
//       - Word count: around ${wordLimit} words (between 1000–2500)
//       - Include relevant headings and subheadings
//       - Make it well-structured and SEO-friendly
//       - ${includeHashtags ? 'Add 3–5 relevant hashtags at the end' : 'No hashtags'}
//       - ${includeEmoji ? 'Use emojis sparingly where relevant' : 'Avoid emojis'}
//       Only return the blog content.
//       `;
//     } else if (["instagram", "facebook","linkedin","twitter"].includes(platform)) {
//       prompt = `
//       You are an expert social media content creator.
//       Create a caption for ${platform}, analyzing the provided ${
//         imageBase64 ? "image" : "description"
//       }${imageBase64 && description ? " and description together" : ""}.
//       Guidelines:
//       - Tone: ${tone}
//       - Word limit: ${wordLimit}
//       - ${includeHashtags ? "Include relevant hashtags" : "Do not include hashtags"}
//       - ${includeEmoji ? "Use emojis naturally" : "Avoid emojis"}
//       Focus on creating an engaging and context-aware caption.
//       Return only the caption text.
//       `;
//     } else {
//       prompt = `
//       Write a ${platform} post about: ${description}.
//       - Tone: ${tone}
//       - Word limit: ${wordLimit}
//       - ${includeEmoji ? "Include emojis" : "No emojis"}
//       - ${includeHashtags ? "Include hashtags" : "No hashtags"}
//       Only output the final text.
//       `;
//     }
//     // --- Input parts (text + optional image) ---
//     const inputParts: any[] = [{ text: prompt }];
//     if (imageBase64) {
//       inputParts.push({
//         inlineData: {
//           data: imageBase64.split(",")[1],
//           mimeType: "image/jpeg",
//         },
//       });
//     }
//     const result = await model.generateContent({
//       contents: [{ role: "user", parts: inputParts }],
//     });
//     const response = result.response.text().trim();
//     return new Response(JSON.stringify({ content: response }), { status: 200 });
//   } catch (error) {
//     console.error("Error generating post:", error);
//     return new Response(JSON.stringify({ error: "Failed to generate content" }), { status: 500 });
//   }
// }
//----re
__turbopack_esm__({
    "POST": (()=>POST),
    "config": (()=>config)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$google$2f$generative$2d$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_import__("[project]/node_modules/@google/generative-ai/dist/index.mjs [app-route] (ecmascript)");
;
const genAI = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$google$2f$generative$2d$ai$2f$dist$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GoogleGenerativeAI"](process.env.GEMINI_API_KEY);
const config = {
    api: {
        bodyParser: {
            sizeLimit: '15mb'
        }
    }
};
async function POST(req) {
    try {
        const body = await req.json();
        const { platform, tone, wordLimit, includeHashtags, includeEmoji, description, imageBase64 } = body;
        const model = genAI.getGenerativeModel({
            model: "gemini-2.0-flash"
        });
        let prompt = "";
        // --- Platform-Specific Prompts ---
        if (platform === "blog") {
            prompt = `
      Write a detailed blog post on: "${description || 'a topic inferred from the image'}".
      Requirements:
      - Tone: ${tone}
      - Word count: around ${wordLimit} words (between 1000–2500)
      - Include relevant headings and subheadings
      - Make it well-structured and SEO-friendly
      - ${includeHashtags ? 'Add 3–5 relevant hashtags at the end (with #)' : 'No hashtags'}
      - ${includeEmoji ? 'Use emojis sparingly where relevant' : 'Avoid emojis'}
      Only return the blog content.
      `;
        } else if ([
            "instagram",
            "facebook",
            "linkedin",
            "twitter"
        ].includes(platform)) {
            prompt = `
      You are an expert social media content creator.
      Create a caption for ${platform}, analyzing the provided ${imageBase64 ? "image" : "description"}${imageBase64 && description ? " and description together" : ""}.
      Guidelines:
      - Tone: ${tone}
      - Word limit: ${wordLimit}
      - ${includeHashtags ? "Include relevant hashtags at the end (each should begin with #)" : "Do not include hashtags"}
      - ${includeEmoji ? "Use emojis naturally" : "Avoid emojis"}
      Focus on creating an engaging and context-aware caption.
      Return only the caption text.
      `;
        } else {
            prompt = `
      Write a ${platform} post about: ${description}.
      - Tone: ${tone}
      - Word limit: ${wordLimit}
      - ${includeEmoji ? "Include emojis" : "No emojis"}
      - ${includeHashtags ? "Include hashtags (with #)" : "No hashtags"}
      Only output the final text.
      `;
        }
        // console.log(includeHashtags); 
        // --- Input parts (text + optional image) ---
        const inputParts = [
            {
                text: prompt
            }
        ];
        if (imageBase64) {
            inputParts.push({
                inlineData: {
                    data: imageBase64.split(",")[1],
                    mimeType: "image/jpeg"
                }
            });
        }
        const result = await model.generateContent({
            contents: [
                {
                    role: "user",
                    parts: inputParts
                }
            ]
        });
        let response = result.response.text().trim();
        // ✅ Force hashtags to start with "#" if includeHashtags is true
        if (includeHashtags) {
            // Split lines and remove empty ones
            const lines = response.split("\n").map((line)=>line.trim()).filter(Boolean);
            let lastLine = lines[lines.length - 1];
            // Loosen the condition — allow emojis, punctuation, etc.
            if (lastLine && lastLine.split(/\s+/).length <= 12) {
                // Convert words that aren't already hashtags
                console.log("lastline=", lastLine);
                const hashtags = lastLine.split(/\s+/).filter(Boolean).map((word)=>{
                    // Strip punctuation like commas or periods
                    const cleanWord = word.replace(/[^\w#]/g, "");
                    return cleanWord.startsWith("#") ? cleanWord : `#${cleanWord}`;
                }).join(" ");
                // console.log("hashtags:",hashtags);
                // Only replace if the line doesn't already contain multiple "#"
                lines[lines.length - 1] = hashtags;
                // console.log(lines[lines.length-1]);
                response = lines.join("\n");
            // console.log(response);
            }
        // console.log(response)
        // return new Response(JSON.stringify({ content: response }), { status: 200 });
        }
        return new Response(JSON.stringify({
            content: response
        }), {
            status: 200
        });
    } catch (error) {
        console.error("Error generating post:", error);
        return new Response(JSON.stringify({
            error: "Failed to generate content"
        }), {
            status: 500
        });
    }
}
}}),
"[project]/ (server-utils)": ((__turbopack_context__) => {

var { r: __turbopack_require__, f: __turbopack_module_context__, i: __turbopack_import__, s: __turbopack_esm__, v: __turbopack_export_value__, n: __turbopack_export_namespace__, c: __turbopack_cache__, M: __turbopack_modules__, l: __turbopack_load__, j: __turbopack_dynamic__, P: __turbopack_resolve_absolute_path__, U: __turbopack_relative_url__, R: __turbopack_resolve_module_id_path__, b: __turbopack_worker_blob_url__, g: global, __dirname, t: __turbopack_require_real__ } = __turbopack_context__;
{
}}),

};

//# sourceMappingURL=%5Broot%20of%20the%20server%5D__a054b2._.js.map